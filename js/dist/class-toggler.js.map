{"version":3,"file":"class-toggler.js","sources":["../src/util/index.js","../src/class-toggler.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nconst toType = obj => ({}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase())\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-target')\n\n  if (!selector || selector === '#') {\n    const hrefAttr = element.getAttribute('href')\n\n    selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : null\n  }\n\n  return selector\n}\n\nconst getSelectorFromElement = element => {\n  const selector = getSelector(element)\n\n  if (selector) {\n    return document.querySelector(selector) ? selector : null\n  }\n\n  return null\n}\n\nconst getElementFromSelector = element => {\n  const selector = getSelector(element)\n\n  return selector ? document.querySelector(selector) : null\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let {\n    transitionDuration,\n    transitionDelay\n  } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = parseFloat(transitionDuration)\n  const floatTransitionDelay = parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  const evt = document.createEvent('HTMLEvents')\n\n  evt.initEvent(TRANSITION_END, true, true)\n  element.dispatchEvent(evt)\n}\n\nconst isElement = obj => (obj[0] || obj).nodeType\n\nconst emulateTransitionEnd = (element, duration) => {\n  let called = false\n  const durationPadding = 5\n  const emulatedDuration = duration + durationPadding\n  function listener() {\n    called = true\n    element.removeEventListener(TRANSITION_END, listener)\n  }\n\n  element.addEventListener(TRANSITION_END, listener)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(element)\n    }\n  }, emulatedDuration)\n}\n\nconst typeCheckConfig = (componentName, config, configTypes) => {\n  Object.keys(configTypes)\n    .forEach(property => {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = value && isElement(value) ?\n        'element' :\n        toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new Error(\n          `${componentName.toUpperCase()}: ` +\n          `Option \"${property}\" provided type \"${valueType}\" ` +\n          `but expected type \"${expectedTypes}\".`)\n      }\n    })\n}\n\nconst makeArray = nodeList => {\n  if (!nodeList) {\n    return []\n  }\n\n  return [].slice.call(nodeList)\n}\n\nconst isVisible = element => {\n  if (!element) {\n    return false\n  }\n\n  if (element.style && element.parentNode && element.parentNode.style) {\n    const elementStyle = getComputedStyle(element)\n    const parentNodeStyle = getComputedStyle(element.parentNode)\n\n    return elementStyle.display !== 'none' &&\n      parentNodeStyle.display !== 'none' &&\n      elementStyle.visibility !== 'hidden'\n  }\n\n  return false\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => function () {}\n\nconst reflow = element => element.offsetHeight\n\nconst getjQuery = () => {\n  const { jQuery } = window\n\n  if (jQuery && !document.body.hasAttribute('data-no-jquery')) {\n    return jQuery\n  }\n\n  return null\n}\n\nexport {\n  getjQuery,\n  TRANSITION_END,\n  getUID,\n  getSelectorFromElement,\n  getElementFromSelector,\n  getTransitionDurationFromElement,\n  triggerTransitionEnd,\n  isElement,\n  emulateTransitionEnd,\n  typeCheckConfig,\n  makeArray,\n  isVisible,\n  findShadowRoot,\n  noop,\n  reflow\n}\n","import {\n    getjQuery\n} from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'class-toggler'\nconst VERSION = '1.0.0'\nconst DATA_KEY = 'xcodiui.class-toggler'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst Default = {\n    breakpoints: '-sm,-md,-lg,-xl',\n    postfix: '-show',\n    responsive: false,\n    target: 'body'\n}\n\nconst ClassName = {\n    CLASS_TOGGLER: 'xc-class-toggler'\n}\n\nconst Event = {\n    CLASS_TOGGLE: 'classtoggle',\n    CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst Selector = {\n    CLASS_TOGGLER: '.xc-class-toggler'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ClassToggler {\n    constructor(element) {\n        this._element = element\n    }\n\n    // Getters\n\n    static get VERSION() {\n        return VERSION\n    }\n\n    // Public\n    toggle() {\n        this._getElementDataAttributes(this._element).forEach(dataAttributes => {\n            let element\n            const { target, toggle } = dataAttributes\n            if (target === '_parent' || target === 'parent') {\n                element = this._element.parentNode\n            } else {\n                element = document.querySelector(target)\n            }\n\n            toggle.forEach(object => {\n                const { className, responsive, postfix } = object\n                const breakpoints = (typeof object.breakpoints === 'undefined' || object.breakpoints === null) ? null : this._arrayFromString(object.breakpoints)\n\n                // eslint-disable-next-line no-negated-condition\n                if (!responsive) {\n                    const add = element.classList.toggle(className)\n                    const event = new CustomEvent(Event.CLASS_TOGGLE, {\n                        detail: {\n                            target,\n                            add,\n                            className\n                        }\n                    })\n                    element.dispatchEvent(event)\n                } else {\n                    let currentBreakpoint\n                    breakpoints.forEach(breakpoint => {\n                        if (className.includes(breakpoint)) {\n                            currentBreakpoint = breakpoint\n                        }\n                    })\n                    const responsiveClassNames = []\n                    if (typeof currentBreakpoint === 'undefined') {\n                        responsiveClassNames.push(className)\n                    } else {\n                        responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, postfix))\n                        breakpoints.splice(0, breakpoints.indexOf(currentBreakpoint) + 1).forEach(breakpoint => {\n                            responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, `${breakpoint}${postfix}`))\n                        })\n                    }\n\n                    let addResponsiveClasses = false\n                    responsiveClassNames.forEach(responsiveClassName => {\n                        if (element.classList.contains(responsiveClassName)) {\n                            addResponsiveClasses = true\n                        }\n                    })\n\n                    if (addResponsiveClasses) {\n                        responsiveClassNames.forEach(responsiveClassName => {\n                            element.classList.remove(responsiveClassName)\n                            const event = new CustomEvent(Event.CLASS_TOGGLE, {\n                                detail: {\n                                    target,\n                                    add: false,\n                                    className: responsiveClassName\n                                }\n                            })\n                            element.dispatchEvent(event)\n                        })\n                    } else {\n                        element.classList.add(className)\n                        const event = new CustomEvent(Event.CLASS_TOGGLE, {\n                            detail: {\n                                target,\n                                add: true,\n                                className\n                            }\n                        })\n                        element.dispatchEvent(event)\n                    }\n                }\n            })\n        })\n    }\n\n    // Private\n\n    _arrayFromString(string) {\n        return string.replace(/ /g, '').split(',')\n    }\n\n    _isArray(array) {\n        try {\n            JSON.parse(array.replace(/'/g, '\"'))\n            return true\n        } catch {\n            return false\n        }\n    }\n\n    _convertToArray(array) {\n        return JSON.parse(array.replace(/'/g, '\"'))\n    }\n\n    _getDataAttributes(data, attribute) {\n        const dataAttribute = data[attribute]\n        return this._isArray(dataAttribute) ? this._convertToArray(dataAttribute) : dataAttribute\n    }\n\n    _getToggleDetails(classNames, responsive, breakpoints, postfix) {\n        class ToggleDetails {\n            // eslint-disable-next-line default-param-last\n            constructor(className, responsive = Default.responsive, breakpoints, postfix) {\n                this.className = className\n                this.responsive = responsive\n                this.breakpoints = breakpoints\n                this.postfix = postfix\n            }\n        }\n\n        const toggle = []\n\n        if (Array.isArray(classNames)) {\n            classNames.forEach((className, index) => {\n                responsive = Array.isArray(responsive) ? responsive[index] : responsive\n                breakpoints = responsive ? (Array.isArray(breakpoints) ? breakpoints[index] : breakpoints) : null\n                postfix = responsive ? (Array.isArray(postfix) ? postfix[index] : postfix) : null\n                toggle.push(new ToggleDetails(className, responsive, breakpoints, postfix))\n            })\n        } else {\n            breakpoints = responsive ? breakpoints : null\n            postfix = responsive ? postfix : null\n            toggle.push(new ToggleDetails(classNames, responsive, breakpoints, postfix))\n        }\n\n        return toggle\n    }\n\n    _ifArray(array, index) {\n        return Array.isArray(array) ? array[index] : array\n    }\n\n    _getElementDataAttributes(element) {\n        const data = element.dataset\n        const targets = (typeof data.target === 'undefined') ? Default.target : this._getDataAttributes(data, 'target')\n        const classNames = (typeof data.class === 'undefined') ? 'undefined' : this._getDataAttributes(data, 'class')\n        const responsive = (typeof data.responsive === 'undefined') ? Default.responsive : this._getDataAttributes(data, 'responsive')\n        const breakpoints = (typeof data.breakpoints === 'undefined') ? Default.breakpoints : this._getDataAttributes(data, 'breakpoints')\n        const postfix = (typeof data.postfix === 'undefined') ? Default.postfix : this._getDataAttributes(data, 'postfix')\n\n        const toggle = []\n\n        class TargetDetails {\n            constructor(target, toggle) {\n                this.target = target\n                this.toggle = toggle\n            }\n        }\n\n        if (Array.isArray(targets)) {\n            targets.forEach((target, index) => {\n                toggle.push(new TargetDetails(target, this._getToggleDetails(this._ifArray(classNames, index), this._ifArray(responsive, index), this._ifArray(breakpoints, index), this._ifArray(postfix, index))))\n            })\n        } else {\n            toggle.push(new TargetDetails(targets, this._getToggleDetails(classNames, responsive, breakpoints, postfix)))\n        }\n\n        return toggle\n    }\n\n    // Static\n\n    static _classTogglerInterface(element, config) {\n        let data = Data.getData(element, DATA_KEY)\n        const _config = typeof config === 'object' && config\n\n        if (!data) {\n            data = new ClassToggler(element, _config)\n        }\n\n        if (typeof config === 'string') {\n            if (typeof data[config] === 'undefined') {\n                throw new TypeError(`No method named \"${config}\"`)\n            }\n\n            data[config]()\n        }\n    }\n\n    static jQueryInterface(config) {\n        return this.each(function() {\n            ClassToggler._classTogglerInterface(this, config)\n        })\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nEventHandler.on(document, Event.CLICK_DATA_API, Selector.CLASS_TOGGLER, event => {\n    event.preventDefault()\n    let toggler = event.target\n    if (!toggler.classList.contains(ClassName.CLASS_TOGGLER)) {\n        toggler = toggler.closest(Selector.CLASS_TOGGLER)\n    }\n\n    ClassToggler._classTogglerInterface(toggler, 'toggle')\n})\n\nconst $ = getjQuery()\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .c-class-toggler to jQuery only if jQuery is present\n */\n\nif ($) {\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\n    $.fn[NAME] = ClassToggler.jQueryInterface\n    $.fn[NAME].Constructor = ClassToggler\n    $.fn[NAME].noConflict = () => {\n        $.fn[NAME] = JQUERY_NO_CONFLICT\n        return ClassToggler.jQueryInterface\n    }\n}\n\nexport default ClassToggler"],"names":["getjQuery","window","jQuery","document","body","hasAttribute","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","breakpoints","postfix","responsive","target","ClassName","CLASS_TOGGLER","Event","CLASS_TOGGLE","CLICK_DATA_API","Selector","ClassToggler","element","_element","toggle","_getElementDataAttributes","forEach","dataAttributes","parentNode","querySelector","object","className","_arrayFromString","add","classList","event","CustomEvent","detail","dispatchEvent","currentBreakpoint","breakpoint","includes","responsiveClassNames","push","replace","splice","indexOf","addResponsiveClasses","responsiveClassName","contains","remove","string","split","_isArray","array","JSON","parse","_convertToArray","_getDataAttributes","data","attribute","dataAttribute","_getToggleDetails","classNames","ToggleDetails","Array","isArray","index","_ifArray","dataset","targets","class","TargetDetails","_classTogglerInterface","config","Data","getData","_config","TypeError","jQueryInterface","each","EventHandler","on","preventDefault","toggler","closest","$","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":"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"}