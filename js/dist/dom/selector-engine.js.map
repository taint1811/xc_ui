{"version":3,"file":"selector-engine.js","sources":["../../src/dom/selector-engine.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.0.0-alpha1): dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { find as findFn, findOne } from './polyfill'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NODE_TEXT = 3\n\nconst SelectorEngine = {\n    matches(element, selector) {\n        return element.matches(selector)\n    },\n\n    find(selector, element = document.documentElement) {\n        return [].concat(...findFn.call(element, selector))\n    },\n\n    findOne(selector, element = document.documentElement) {\n        return findOne.call(element, selector)\n    },\n\n    children(element, selector) {\n        const children = [].concat(...element.children)\n\n        return children.filter(child => child.matches(selector))\n    },\n\n    parents(element, selector) {\n        const parents = []\n\n        let ancestor = element.parentNode\n\n        while (ancestor && ancestor.nodeType === Node.ELEMENT_NODE && ancestor.nodeType !== NODE_TEXT) {\n            if (this.matches(ancestor, selector)) {\n                parents.push(ancestor)\n            }\n\n            ancestor = ancestor.parentNode\n        }\n\n        return parents\n    },\n\n    prev(element, selector) {\n        let previous = element.previousElementSibling\n\n        while (previous) {\n            if (previous.matches(selector)) {\n                return [previous]\n            }\n\n            previous = previous.previousElementSibling\n        }\n\n        return []\n    },\n\n    next(element, selector) {\n        let next = element.nextElementSibling\n\n        while (next) {\n            if (this.matches(next, selector)) {\n                return [next]\n            }\n\n            next = next.nextElementSibling\n        }\n\n        return []\n    }\n}\n\nexport default SelectorEngine"],"names":["NODE_TEXT","SelectorEngine","matches","element","selector","find","document","documentElement","concat","findFn","call","findOne","children","filter","child","parents","ancestor","parentNode","nodeType","Node","ELEMENT_NODE","push","prev","previous","previousElementSibling","next","nextElementSibling"],"mappings":";;;;;;;;;;;IAAA;;;;;;IASA;;;;;;IAMA,IAAMA,SAAS,GAAG,CAAlB;IAEA,IAAMC,cAAc,GAAG;IACnBC,EAAAA,OADmB,mBACXC,OADW,EACFC,QADE,EACQ;IACvB,WAAOD,OAAO,CAACD,OAAR,CAAgBE,QAAhB,CAAP;IACH,GAHkB;IAKnBC,EAAAA,IALmB,gBAKdD,QALc,EAKJD,OALI,EAKgC;IAAA;;IAAA,QAApCA,OAAoC;IAApCA,MAAAA,OAAoC,GAA1BG,QAAQ,CAACC,eAAiB;IAAA;;IAC/C,WAAO,YAAGC,MAAH,aAAaC,gBAAM,CAACC,IAAP,CAAYP,OAAZ,EAAqBC,QAArB,CAAb,CAAP;IACH,GAPkB;IASnBO,EAAAA,OATmB,mBASXP,QATW,EASDD,OATC,EASmC;IAAA,QAApCA,OAAoC;IAApCA,MAAAA,OAAoC,GAA1BG,QAAQ,CAACC,eAAiB;IAAA;;IAClD,WAAOI,mBAAO,CAACD,IAAR,CAAaP,OAAb,EAAsBC,QAAtB,CAAP;IACH,GAXkB;IAanBQ,EAAAA,QAbmB,oBAaVT,OAbU,EAaDC,QAbC,EAaS;IAAA;;IACxB,QAAMQ,QAAQ,GAAG,aAAGJ,MAAH,cAAaL,OAAO,CAACS,QAArB,CAAjB;;IAEA,WAAOA,QAAQ,CAACC,MAAT,CAAgB,UAAAC,KAAK;IAAA,aAAIA,KAAK,CAACZ,OAAN,CAAcE,QAAd,CAAJ;IAAA,KAArB,CAAP;IACH,GAjBkB;IAmBnBW,EAAAA,OAnBmB,mBAmBXZ,OAnBW,EAmBFC,QAnBE,EAmBQ;IACvB,QAAMW,OAAO,GAAG,EAAhB;IAEA,QAAIC,QAAQ,GAAGb,OAAO,CAACc,UAAvB;;IAEA,WAAOD,QAAQ,IAAIA,QAAQ,CAACE,QAAT,KAAsBC,IAAI,CAACC,YAAvC,IAAuDJ,QAAQ,CAACE,QAAT,KAAsBlB,SAApF,EAA+F;IAC3F,UAAI,KAAKE,OAAL,CAAac,QAAb,EAAuBZ,QAAvB,CAAJ,EAAsC;IAClCW,QAAAA,OAAO,CAACM,IAAR,CAAaL,QAAb;IACH;;IAEDA,MAAAA,QAAQ,GAAGA,QAAQ,CAACC,UAApB;IACH;;IAED,WAAOF,OAAP;IACH,GAjCkB;IAmCnBO,EAAAA,IAnCmB,gBAmCdnB,OAnCc,EAmCLC,QAnCK,EAmCK;IACpB,QAAImB,QAAQ,GAAGpB,OAAO,CAACqB,sBAAvB;;IAEA,WAAOD,QAAP,EAAiB;IACb,UAAIA,QAAQ,CAACrB,OAAT,CAAiBE,QAAjB,CAAJ,EAAgC;IAC5B,eAAO,CAACmB,QAAD,CAAP;IACH;;IAEDA,MAAAA,QAAQ,GAAGA,QAAQ,CAACC,sBAApB;IACH;;IAED,WAAO,EAAP;IACH,GA/CkB;IAiDnBC,EAAAA,IAjDmB,gBAiDdtB,OAjDc,EAiDLC,QAjDK,EAiDK;IACpB,QAAIqB,IAAI,GAAGtB,OAAO,CAACuB,kBAAnB;;IAEA,WAAOD,IAAP,EAAa;IACT,UAAI,KAAKvB,OAAL,CAAauB,IAAb,EAAmBrB,QAAnB,CAAJ,EAAkC;IAC9B,eAAO,CAACqB,IAAD,CAAP;IACH;;IAEDA,MAAAA,IAAI,GAAGA,IAAI,CAACC,kBAAZ;IACH;;IAED,WAAO,EAAP;IACH;IA7DkB,CAAvB;;;;;;;;"}